\hypertarget{group__lwip__opts__mem}{}\doxysection{Heap and memory pools}
\label{group__lwip__opts__mem}\index{Heap and memory pools@{Heap and memory pools}}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga4ef345cc270912bd2230b1c5ec51dfc8}{M\+E\+M\+\_\+\+L\+I\+B\+C\+\_\+\+M\+A\+L\+L\+OC}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_gae93af697d27bbcefa6a28052d90f2f38}{M\+E\+M\+P\+\_\+\+M\+E\+M\+\_\+\+M\+A\+L\+L\+OC}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga97343214666ee6dcb18c0bd77b441ea7}{M\+E\+M\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT}}~1
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga2dcf8c45f945dd0c4301a94700f2112c}{M\+E\+M\+\_\+\+S\+I\+ZE}}~1600
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga27fdd01194a42fc41a7716b72cdb49e3}{M\+E\+M\+P\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+C\+H\+E\+CK}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga0838947193e222a9f46b582e01e5beff}{M\+E\+M\+P\+\_\+\+S\+A\+N\+I\+T\+Y\+\_\+\+C\+H\+E\+CK}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_gaddca3141bc7037241769eb152b6f89ba}{M\+E\+M\+\_\+\+U\+S\+E\+\_\+\+P\+O\+O\+LS}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_gaba8be68e8fd0716b723ce4569ed89f82}{M\+E\+M\+\_\+\+U\+S\+E\+\_\+\+P\+O\+O\+L\+S\+\_\+\+T\+R\+Y\+\_\+\+B\+I\+G\+G\+E\+R\+\_\+\+P\+O\+OL}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga69de593b8ffd4f1c249f03e48e11983b}{M\+E\+M\+P\+\_\+\+U\+S\+E\+\_\+\+C\+U\+S\+T\+O\+M\+\_\+\+P\+O\+O\+LS}}~0
\item 
\#define \mbox{\hyperlink{group__lwip__opts__mem_ga0a3ef6098813c103e5aba07da76e15e2}{L\+W\+I\+P\+\_\+\+A\+L\+L\+O\+W\+\_\+\+M\+E\+M\+\_\+\+F\+R\+E\+E\+\_\+\+F\+R\+O\+M\+\_\+\+O\+T\+H\+E\+R\+\_\+\+C\+O\+N\+T\+E\+XT}}~0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{group__lwip__opts__mem_ga0a3ef6098813c103e5aba07da76e15e2}\label{group__lwip__opts__mem_ga0a3ef6098813c103e5aba07da76e15e2}} 
\index{Heap and memory pools@{Heap and memory pools}!LWIP\_ALLOW\_MEM\_FREE\_FROM\_OTHER\_CONTEXT@{LWIP\_ALLOW\_MEM\_FREE\_FROM\_OTHER\_CONTEXT}}
\index{LWIP\_ALLOW\_MEM\_FREE\_FROM\_OTHER\_CONTEXT@{LWIP\_ALLOW\_MEM\_FREE\_FROM\_OTHER\_CONTEXT}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{LWIP\_ALLOW\_MEM\_FREE\_FROM\_OTHER\_CONTEXT}{LWIP\_ALLOW\_MEM\_FREE\_FROM\_OTHER\_CONTEXT}}
{\footnotesize\ttfamily \#define L\+W\+I\+P\+\_\+\+A\+L\+L\+O\+W\+\_\+\+M\+E\+M\+\_\+\+F\+R\+E\+E\+\_\+\+F\+R\+O\+M\+\_\+\+O\+T\+H\+E\+R\+\_\+\+C\+O\+N\+T\+E\+XT~0}

Set this to 1 if you want to free P\+B\+U\+F\+\_\+\+R\+AM pbufs (or call mem\+\_\+free()) from interrupt context (or another context that doesn\textquotesingle{}t allow waiting for a semaphore). If set to 1, mem\+\_\+malloc will be protected by a semaphore and S\+Y\+S\+\_\+\+A\+R\+C\+H\+\_\+\+P\+R\+O\+T\+E\+CT, while mem\+\_\+free will only use S\+Y\+S\+\_\+\+A\+R\+C\+H\+\_\+\+P\+R\+O\+T\+E\+CT. mem\+\_\+malloc S\+Y\+S\+\_\+\+A\+R\+C\+H\+\_\+\+U\+N\+P\+R\+O\+T\+E\+C\+Ts with each loop so that mem\+\_\+free can run.

A\+T\+T\+E\+N\+T\+I\+ON\+: As you can see from the above description, this leads to dis-\// enabling interrupts often, which can be slow! Also, on low memory, mem\+\_\+malloc can need longer.

If you don\textquotesingle{}t want that, at least for N\+O\+\_\+\+S\+YS=0, you can still use the following functions to enqueue a deallocation call which then runs in the tcpip\+\_\+thread context\+:
\begin{DoxyItemize}
\item pbuf\+\_\+free\+\_\+callback(p);
\item mem\+\_\+free\+\_\+callback(m); 
\end{DoxyItemize}

Definition at line 327 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_ga97343214666ee6dcb18c0bd77b441ea7}\label{group__lwip__opts__mem_ga97343214666ee6dcb18c0bd77b441ea7}} 
\index{Heap and memory pools@{Heap and memory pools}!MEM\_ALIGNMENT@{MEM\_ALIGNMENT}}
\index{MEM\_ALIGNMENT@{MEM\_ALIGNMENT}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEM\_ALIGNMENT}{MEM\_ALIGNMENT}}
{\footnotesize\ttfamily \#define M\+E\+M\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT~1}

M\+E\+M\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT\+: should be set to the alignment of the C\+PU 4 byte alignment -\/$>$ \#define M\+E\+M\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT 4 2 byte alignment -\/$>$ \#define M\+E\+M\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT 2 

Definition at line 248 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_ga4ef345cc270912bd2230b1c5ec51dfc8}\label{group__lwip__opts__mem_ga4ef345cc270912bd2230b1c5ec51dfc8}} 
\index{Heap and memory pools@{Heap and memory pools}!MEM\_LIBC\_MALLOC@{MEM\_LIBC\_MALLOC}}
\index{MEM\_LIBC\_MALLOC@{MEM\_LIBC\_MALLOC}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEM\_LIBC\_MALLOC}{MEM\_LIBC\_MALLOC}}
{\footnotesize\ttfamily \#define M\+E\+M\+\_\+\+L\+I\+B\+C\+\_\+\+M\+A\+L\+L\+OC~0}

M\+E\+M\+\_\+\+L\+I\+B\+C\+\_\+\+M\+A\+L\+L\+OC==1\+: Use malloc/free/realloc provided by your C-\/library instead of the lwip internal allocator. Can save code size if you already use it. 

Definition at line 226 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_ga2dcf8c45f945dd0c4301a94700f2112c}\label{group__lwip__opts__mem_ga2dcf8c45f945dd0c4301a94700f2112c}} 
\index{Heap and memory pools@{Heap and memory pools}!MEM\_SIZE@{MEM\_SIZE}}
\index{MEM\_SIZE@{MEM\_SIZE}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEM\_SIZE}{MEM\_SIZE}}
{\footnotesize\ttfamily \#define M\+E\+M\+\_\+\+S\+I\+ZE~1600}

M\+E\+M\+\_\+\+S\+I\+ZE\+: the size of the heap memory. If the application will send a lot of data that needs to be copied, this should be set high. 

Definition at line 256 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_gaddca3141bc7037241769eb152b6f89ba}\label{group__lwip__opts__mem_gaddca3141bc7037241769eb152b6f89ba}} 
\index{Heap and memory pools@{Heap and memory pools}!MEM\_USE\_POOLS@{MEM\_USE\_POOLS}}
\index{MEM\_USE\_POOLS@{MEM\_USE\_POOLS}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEM\_USE\_POOLS}{MEM\_USE\_POOLS}}
{\footnotesize\ttfamily \#define M\+E\+M\+\_\+\+U\+S\+E\+\_\+\+P\+O\+O\+LS~0}

M\+E\+M\+\_\+\+U\+S\+E\+\_\+\+P\+O\+O\+LS==1\+: Use an alternative to malloc() by allocating from a set of memory pools of various sizes. When mem\+\_\+malloc is called, an element of the smallest pool that can provide the length needed is returned. To use this, M\+E\+M\+P\+\_\+\+U\+S\+E\+\_\+\+C\+U\+S\+T\+O\+M\+\_\+\+P\+O\+O\+LS also has to be enabled. 

Definition at line 287 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_gaba8be68e8fd0716b723ce4569ed89f82}\label{group__lwip__opts__mem_gaba8be68e8fd0716b723ce4569ed89f82}} 
\index{Heap and memory pools@{Heap and memory pools}!MEM\_USE\_POOLS\_TRY\_BIGGER\_POOL@{MEM\_USE\_POOLS\_TRY\_BIGGER\_POOL}}
\index{MEM\_USE\_POOLS\_TRY\_BIGGER\_POOL@{MEM\_USE\_POOLS\_TRY\_BIGGER\_POOL}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEM\_USE\_POOLS\_TRY\_BIGGER\_POOL}{MEM\_USE\_POOLS\_TRY\_BIGGER\_POOL}}
{\footnotesize\ttfamily \#define M\+E\+M\+\_\+\+U\+S\+E\+\_\+\+P\+O\+O\+L\+S\+\_\+\+T\+R\+Y\+\_\+\+B\+I\+G\+G\+E\+R\+\_\+\+P\+O\+OL~0}

M\+E\+M\+\_\+\+U\+S\+E\+\_\+\+P\+O\+O\+L\+S\+\_\+\+T\+R\+Y\+\_\+\+B\+I\+G\+G\+E\+R\+\_\+\+P\+O\+OL==1\+: if one malloc-\/pool is empty, try the next bigger pool -\/ W\+A\+R\+N\+I\+NG\+: T\+H\+IS M\+I\+G\+HT W\+A\+S\+TE M\+E\+M\+O\+RY but it can make a system more reliable. 

Definition at line 295 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_gae93af697d27bbcefa6a28052d90f2f38}\label{group__lwip__opts__mem_gae93af697d27bbcefa6a28052d90f2f38}} 
\index{Heap and memory pools@{Heap and memory pools}!MEMP\_MEM\_MALLOC@{MEMP\_MEM\_MALLOC}}
\index{MEMP\_MEM\_MALLOC@{MEMP\_MEM\_MALLOC}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEMP\_MEM\_MALLOC}{MEMP\_MEM\_MALLOC}}
{\footnotesize\ttfamily \#define M\+E\+M\+P\+\_\+\+M\+E\+M\+\_\+\+M\+A\+L\+L\+OC~0}

M\+E\+M\+P\+\_\+\+M\+E\+M\+\_\+\+M\+A\+L\+L\+OC==1\+: Use mem\+\_\+malloc/mem\+\_\+free instead of the lwip pool allocator. Especially useful with M\+E\+M\+\_\+\+L\+I\+B\+C\+\_\+\+M\+A\+L\+L\+OC but handle with care regarding execution speed (heap alloc can be much slower than pool alloc) and usage from interrupts (especially if your netif driver allocates P\+B\+U\+F\+\_\+\+P\+O\+OL pbufs for received frames from interrupt)! A\+T\+T\+E\+N\+T\+I\+ON\+: Currently, this uses the heap for A\+LL pools (also for private pools, not only for internal pools defined in \mbox{\hyperlink{memp__std_8h}{memp\+\_\+std.\+h}})! 

Definition at line 239 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_ga27fdd01194a42fc41a7716b72cdb49e3}\label{group__lwip__opts__mem_ga27fdd01194a42fc41a7716b72cdb49e3}} 
\index{Heap and memory pools@{Heap and memory pools}!MEMP\_OVERFLOW\_CHECK@{MEMP\_OVERFLOW\_CHECK}}
\index{MEMP\_OVERFLOW\_CHECK@{MEMP\_OVERFLOW\_CHECK}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEMP\_OVERFLOW\_CHECK}{MEMP\_OVERFLOW\_CHECK}}
{\footnotesize\ttfamily \#define M\+E\+M\+P\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+C\+H\+E\+CK~0}

M\+E\+M\+P\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+C\+H\+E\+CK\+: memp overflow protection reserves a configurable amount of bytes before and after each memp element in every pool and fills it with a prominent default value. M\+E\+M\+P\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+C\+H\+E\+CK == 0 no checking M\+E\+M\+P\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+C\+H\+E\+CK == 1 checks each element when it is freed M\+E\+M\+P\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+C\+H\+E\+CK $>$= 2 checks each element in every pool every time memp\+\_\+malloc() or memp\+\_\+free() is called (useful but slow!) 

Definition at line 269 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_ga0838947193e222a9f46b582e01e5beff}\label{group__lwip__opts__mem_ga0838947193e222a9f46b582e01e5beff}} 
\index{Heap and memory pools@{Heap and memory pools}!MEMP\_SANITY\_CHECK@{MEMP\_SANITY\_CHECK}}
\index{MEMP\_SANITY\_CHECK@{MEMP\_SANITY\_CHECK}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEMP\_SANITY\_CHECK}{MEMP\_SANITY\_CHECK}}
{\footnotesize\ttfamily \#define M\+E\+M\+P\+\_\+\+S\+A\+N\+I\+T\+Y\+\_\+\+C\+H\+E\+CK~0}

M\+E\+M\+P\+\_\+\+S\+A\+N\+I\+T\+Y\+\_\+\+C\+H\+E\+CK==1\+: run a sanity check after each memp\+\_\+free() to make sure that there are no cycles in the linked lists. 

Definition at line 277 of file opt.\+h.

\mbox{\Hypertarget{group__lwip__opts__mem_ga69de593b8ffd4f1c249f03e48e11983b}\label{group__lwip__opts__mem_ga69de593b8ffd4f1c249f03e48e11983b}} 
\index{Heap and memory pools@{Heap and memory pools}!MEMP\_USE\_CUSTOM\_POOLS@{MEMP\_USE\_CUSTOM\_POOLS}}
\index{MEMP\_USE\_CUSTOM\_POOLS@{MEMP\_USE\_CUSTOM\_POOLS}!Heap and memory pools@{Heap and memory pools}}
\doxysubsubsection{\texorpdfstring{MEMP\_USE\_CUSTOM\_POOLS}{MEMP\_USE\_CUSTOM\_POOLS}}
{\footnotesize\ttfamily \#define M\+E\+M\+P\+\_\+\+U\+S\+E\+\_\+\+C\+U\+S\+T\+O\+M\+\_\+\+P\+O\+O\+LS~0}

M\+E\+M\+P\+\_\+\+U\+S\+E\+\_\+\+C\+U\+S\+T\+O\+M\+\_\+\+P\+O\+O\+LS==1\+: whether to include a user file lwippools.\+h that defines additional pools beyond the \char`\"{}standard\char`\"{} ones required by lw\+IP. If you set this to 1, you must have lwippools.\+h in your include path somewhere. 

Definition at line 305 of file opt.\+h.

