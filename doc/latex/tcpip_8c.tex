\hypertarget{tcpip_8c}{}\doxysection{/root/\+Documents/\+A\+S\+L\+S/\+Firmware\+\_\+\+V2.4/cueos/net/src/api/tcpip.c File Reference}
\label{tcpip_8c}\index{/root/Documents/ASLS/Firmware\_V2.4/cueos/net/src/api/tcpip.c@{/root/Documents/ASLS/Firmware\_V2.4/cueos/net/src/api/tcpip.c}}
{\ttfamily \#include \char`\"{}lwip/opt.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/priv/tcpip\+\_\+priv.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/sys.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/memp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/mem.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/init.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/ip.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/pbuf.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lwip/etharp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}netif/ethernet.\+h\char`\"{}}\newline
Include dependency graph for tcpip.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tcpip_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{tcpip_8c_ad42dbf6b1a12f07523637e44cf85756d}\label{tcpip_8c_ad42dbf6b1a12f07523637e44cf85756d}} 
\#define {\bfseries T\+C\+P\+I\+P\+\_\+\+M\+S\+G\+\_\+\+V\+A\+R\+\_\+\+R\+EF}(name)~A\+P\+I\+\_\+\+V\+A\+R\+\_\+\+R\+EF(name)
\item 
\mbox{\Hypertarget{tcpip_8c_aecf85047afc1ea35a976f7e279fb0f7b}\label{tcpip_8c_aecf85047afc1ea35a976f7e279fb0f7b}} 
\#define {\bfseries T\+C\+P\+I\+P\+\_\+\+M\+S\+G\+\_\+\+V\+A\+R\+\_\+\+D\+E\+C\+L\+A\+RE}(name)~A\+P\+I\+\_\+\+V\+A\+R\+\_\+\+D\+E\+C\+L\+A\+RE(struct \mbox{\hyperlink{structtcpip__msg}{tcpip\+\_\+msg}}, name)
\item 
\mbox{\Hypertarget{tcpip_8c_a2485bb329e586fe0b440cff72bf364e4}\label{tcpip_8c_a2485bb329e586fe0b440cff72bf364e4}} 
\#define {\bfseries T\+C\+P\+I\+P\+\_\+\+M\+S\+G\+\_\+\+V\+A\+R\+\_\+\+A\+L\+L\+OC}(name)~A\+P\+I\+\_\+\+V\+A\+R\+\_\+\+A\+L\+L\+OC(struct \mbox{\hyperlink{structtcpip__msg}{tcpip\+\_\+msg}}, M\+E\+M\+P\+\_\+\+T\+C\+P\+I\+P\+\_\+\+M\+S\+G\+\_\+\+A\+PI, name, \mbox{\hyperlink{group__infrastructure__errors_ggae2e66c7d13afc90ffecd6151680fbadcaaaeafdbf3aecc46864daa3cd829c7e05}{E\+R\+R\+\_\+\+M\+EM}})
\item 
\mbox{\Hypertarget{tcpip_8c_acf5d75be78b6af27ca5ed13da28681d4}\label{tcpip_8c_acf5d75be78b6af27ca5ed13da28681d4}} 
\#define {\bfseries T\+C\+P\+I\+P\+\_\+\+M\+S\+G\+\_\+\+V\+A\+R\+\_\+\+F\+R\+EE}(name)~A\+P\+I\+\_\+\+V\+A\+R\+\_\+\+F\+R\+EE(M\+E\+M\+P\+\_\+\+T\+C\+P\+I\+P\+\_\+\+M\+S\+G\+\_\+\+A\+PI, name)
\item 
\mbox{\Hypertarget{tcpip_8c_a509daeff3c37e5659d0decb841b4e262}\label{tcpip_8c_a509daeff3c37e5659d0decb841b4e262}} 
\#define {\bfseries T\+C\+P\+I\+P\+\_\+\+M\+B\+O\+X\+\_\+\+F\+E\+T\+CH}(mbox,  msg)~sys\+\_\+mbox\+\_\+fetch(mbox, msg)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_a93043b3c66dbe4a15a60299c6199d102}{tcpip\+\_\+inpkt}} (struct \mbox{\hyperlink{structpbuf}{pbuf}} $\ast$p, struct \mbox{\hyperlink{structnetif}{netif}} $\ast$inp, \mbox{\hyperlink{netif_8h_ab2302b1b64ac7b95f24c6bab754a575e}{netif\+\_\+input\+\_\+fn}} input\+\_\+fn)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_ae510f195171bed8499ae94e264a92717}{tcpip\+\_\+input}} (struct \mbox{\hyperlink{structpbuf}{pbuf}} $\ast$p, struct \mbox{\hyperlink{structnetif}{netif}} $\ast$inp)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_ab1d3ef23817d7703fa75ed67bd45ea1d}{tcpip\+\_\+callback\+\_\+with\+\_\+block}} (\mbox{\hyperlink{tcpip_8h_a35203296bb838f3b493839ffc6e7285d}{tcpip\+\_\+callback\+\_\+fn}} function, void $\ast$ctx, u8\+\_\+t block)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_a12bdf37eddcd72c4178e3ea7d370395d}{tcpip\+\_\+send\+\_\+msg\+\_\+wait\+\_\+sem}} (\mbox{\hyperlink{tcpip_8h_a35203296bb838f3b493839ffc6e7285d}{tcpip\+\_\+callback\+\_\+fn}} fn, void $\ast$apimsg, sys\+\_\+sem\+\_\+t $\ast$sem)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_a3d42b0c46607f91aedcc7745ed466b08}{tcpip\+\_\+api\+\_\+call}} (tcpip\+\_\+api\+\_\+call\+\_\+fn fn, struct \mbox{\hyperlink{structtcpip__api__call__data}{tcpip\+\_\+api\+\_\+call\+\_\+data}} $\ast$call)
\item 
struct tcpip\+\_\+callback\+\_\+msg $\ast$ \mbox{\hyperlink{tcpip_8c_aee14fa2587a9ba9d23e4c7e16c4526ac}{tcpip\+\_\+callbackmsg\+\_\+new}} (\mbox{\hyperlink{tcpip_8h_a35203296bb838f3b493839ffc6e7285d}{tcpip\+\_\+callback\+\_\+fn}} function, void $\ast$ctx)
\item 
void \mbox{\hyperlink{tcpip_8c_ac5b7a59f4c3f5f721ab9ee81f231c9fd}{tcpip\+\_\+callbackmsg\+\_\+delete}} (struct tcpip\+\_\+callback\+\_\+msg $\ast$msg)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_acfc81ad493f68714a22b3b8ea7d04378}{tcpip\+\_\+trycallback}} (struct tcpip\+\_\+callback\+\_\+msg $\ast$msg)
\item 
void \mbox{\hyperlink{tcpip_8c_a1f3a88b8df6ba3b9ed1c00e0a305e3db}{tcpip\+\_\+init}} (\mbox{\hyperlink{tcpip_8h_a5fe07216c441e27c3028bcac60fa0992}{tcpip\+\_\+init\+\_\+done\+\_\+fn}} initfunc, void $\ast$arg)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_a5cdcb6b784fe0e8736a5b31a5cfbed6c}{pbuf\+\_\+free\+\_\+callback}} (struct \mbox{\hyperlink{structpbuf}{pbuf}} $\ast$p)
\item 
\mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} \mbox{\hyperlink{tcpip_8c_a55b4de3765c6a37b3f2b26a11603771c}{mem\+\_\+free\+\_\+callback}} (void $\ast$m)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Sequential A\+PI Main thread module 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{tcpip_8c_a55b4de3765c6a37b3f2b26a11603771c}\label{tcpip_8c_a55b4de3765c6a37b3f2b26a11603771c}} 
\index{tcpip.c@{tcpip.c}!mem\_free\_callback@{mem\_free\_callback}}
\index{mem\_free\_callback@{mem\_free\_callback}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{mem\_free\_callback()}{mem\_free\_callback()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} mem\+\_\+free\+\_\+callback (\begin{DoxyParamCaption}\item[{void $\ast$}]{m }\end{DoxyParamCaption})}

A simple wrapper function that allows you to free heap memory from interrupt context.


\begin{DoxyParams}{Parameters}
{\em m} & the heap memory to free \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+\_\+\+OK if callback could be enqueued, an err\+\_\+t if not 
\end{DoxyReturn}


Definition at line 513 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_a5cdcb6b784fe0e8736a5b31a5cfbed6c}\label{tcpip_8c_a5cdcb6b784fe0e8736a5b31a5cfbed6c}} 
\index{tcpip.c@{tcpip.c}!pbuf\_free\_callback@{pbuf\_free\_callback}}
\index{pbuf\_free\_callback@{pbuf\_free\_callback}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{pbuf\_free\_callback()}{pbuf\_free\_callback()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} pbuf\+\_\+free\+\_\+callback (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structpbuf}{pbuf}} $\ast$}]{p }\end{DoxyParamCaption})}

A simple wrapper function that allows you to free a pbuf from interrupt context.


\begin{DoxyParams}{Parameters}
{\em p} & The pbuf (chain) to be dereferenced. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+\_\+\+OK if callback could be enqueued, an err\+\_\+t if not 
\end{DoxyReturn}


Definition at line 500 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_a3d42b0c46607f91aedcc7745ed466b08}\label{tcpip_8c_a3d42b0c46607f91aedcc7745ed466b08}} 
\index{tcpip.c@{tcpip.c}!tcpip\_api\_call@{tcpip\_api\_call}}
\index{tcpip\_api\_call@{tcpip\_api\_call}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_api\_call()}{tcpip\_api\_call()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} tcpip\+\_\+api\+\_\+call (\begin{DoxyParamCaption}\item[{tcpip\+\_\+api\+\_\+call\+\_\+fn}]{fn,  }\item[{struct \mbox{\hyperlink{structtcpip__api__call__data}{tcpip\+\_\+api\+\_\+call\+\_\+data}} $\ast$}]{call }\end{DoxyParamCaption})}

Synchronously calls function in T\+C\+P\+IP thread and waits for its completion. It is recommended to use L\+W\+I\+P\+\_\+\+T\+C\+P\+I\+P\+\_\+\+C\+O\+R\+E\+\_\+\+L\+O\+C\+K\+I\+NG (preferred) or L\+W\+I\+P\+\_\+\+N\+E\+T\+C\+O\+N\+N\+\_\+\+S\+E\+M\+\_\+\+P\+E\+R\+\_\+\+T\+H\+R\+E\+AD. If not, a semaphore is created and destroyed on every call which is usually an expensive/slow operation. 
\begin{DoxyParams}{Parameters}
{\em fn} & Function to call \\
\hline
{\em call} & Call parameters \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return value from tcpip\+\_\+api\+\_\+call\+\_\+fn 
\end{DoxyReturn}


Definition at line 365 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_ab1d3ef23817d7703fa75ed67bd45ea1d}\label{tcpip_8c_ab1d3ef23817d7703fa75ed67bd45ea1d}} 
\index{tcpip.c@{tcpip.c}!tcpip\_callback\_with\_block@{tcpip\_callback\_with\_block}}
\index{tcpip\_callback\_with\_block@{tcpip\_callback\_with\_block}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_callback\_with\_block()}{tcpip\_callback\_with\_block()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} tcpip\+\_\+callback\+\_\+with\+\_\+block (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{tcpip_8h_a35203296bb838f3b493839ffc6e7285d}{tcpip\+\_\+callback\+\_\+fn}}}]{function,  }\item[{void $\ast$}]{ctx,  }\item[{u8\+\_\+t}]{block }\end{DoxyParamCaption})}

Call a specific function in the thread context of tcpip\+\_\+thread for easy access synchronization. A function called in that way may access lw\+IP core code without fearing concurrent access.


\begin{DoxyParams}{Parameters}
{\em function} & the function to call \\
\hline
{\em ctx} & parameter passed to f \\
\hline
{\em block} & 1 to block until the request is posted, 0 to non-\/blocking mode \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+\_\+\+OK if the function was called, another err\+\_\+t if not 
\end{DoxyReturn}


Definition at line 234 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_ac5b7a59f4c3f5f721ab9ee81f231c9fd}\label{tcpip_8c_ac5b7a59f4c3f5f721ab9ee81f231c9fd}} 
\index{tcpip.c@{tcpip.c}!tcpip\_callbackmsg\_delete@{tcpip\_callbackmsg\_delete}}
\index{tcpip\_callbackmsg\_delete@{tcpip\_callbackmsg\_delete}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_callbackmsg\_delete()}{tcpip\_callbackmsg\_delete()}}
{\footnotesize\ttfamily void tcpip\+\_\+callbackmsg\+\_\+delete (\begin{DoxyParamCaption}\item[{struct tcpip\+\_\+callback\+\_\+msg $\ast$}]{msg }\end{DoxyParamCaption})}

Free a callback message allocated by \mbox{\hyperlink{tcpip_8c_aee14fa2587a9ba9d23e4c7e16c4526ac}{tcpip\+\_\+callbackmsg\+\_\+new()}}.


\begin{DoxyParams}{Parameters}
{\em msg} & the message to free \\
\hline
\end{DoxyParams}


Definition at line 433 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_aee14fa2587a9ba9d23e4c7e16c4526ac}\label{tcpip_8c_aee14fa2587a9ba9d23e4c7e16c4526ac}} 
\index{tcpip.c@{tcpip.c}!tcpip\_callbackmsg\_new@{tcpip\_callbackmsg\_new}}
\index{tcpip\_callbackmsg\_new@{tcpip\_callbackmsg\_new}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_callbackmsg\_new()}{tcpip\_callbackmsg\_new()}}
{\footnotesize\ttfamily struct tcpip\+\_\+callback\+\_\+msg$\ast$ tcpip\+\_\+callbackmsg\+\_\+new (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{tcpip_8h_a35203296bb838f3b493839ffc6e7285d}{tcpip\+\_\+callback\+\_\+fn}}}]{function,  }\item[{void $\ast$}]{ctx }\end{DoxyParamCaption})}

Allocate a structure for a static callback message and initialize it. This is intended to be used to send \char`\"{}static\char`\"{} messages from interrupt context.


\begin{DoxyParams}{Parameters}
{\em function} & the function to call \\
\hline
{\em ctx} & parameter passed to function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a struct pointer to pass to \mbox{\hyperlink{tcpip_8c_acfc81ad493f68714a22b3b8ea7d04378}{tcpip\+\_\+trycallback()}}. 
\end{DoxyReturn}


Definition at line 415 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_a1f3a88b8df6ba3b9ed1c00e0a305e3db}\label{tcpip_8c_a1f3a88b8df6ba3b9ed1c00e0a305e3db}} 
\index{tcpip.c@{tcpip.c}!tcpip\_init@{tcpip\_init}}
\index{tcpip\_init@{tcpip\_init}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_init()}{tcpip\_init()}}
{\footnotesize\ttfamily void tcpip\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{tcpip_8h_a5fe07216c441e27c3028bcac60fa0992}{tcpip\+\_\+init\+\_\+done\+\_\+fn}}}]{initfunc,  }\item[{void $\ast$}]{arg }\end{DoxyParamCaption})}

Initialize this module\+:
\begin{DoxyItemize}
\item initialize all sub modules
\item start the tcpip\+\_\+thread
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em initfunc} & a function to call when tcpip\+\_\+thread is running and finished initializing \\
\hline
{\em arg} & argument to pass to initfunc \\
\hline
\end{DoxyParams}


Definition at line 462 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_a93043b3c66dbe4a15a60299c6199d102}\label{tcpip_8c_a93043b3c66dbe4a15a60299c6199d102}} 
\index{tcpip.c@{tcpip.c}!tcpip\_inpkt@{tcpip\_inpkt}}
\index{tcpip\_inpkt@{tcpip\_inpkt}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_inpkt()}{tcpip\_inpkt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} tcpip\+\_\+inpkt (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structpbuf}{pbuf}} $\ast$}]{p,  }\item[{struct \mbox{\hyperlink{structnetif}{netif}} $\ast$}]{inp,  }\item[{\mbox{\hyperlink{netif_8h_ab2302b1b64ac7b95f24c6bab754a575e}{netif\+\_\+input\+\_\+fn}}}]{input\+\_\+fn }\end{DoxyParamCaption})}

Pass a received packet to tcpip\+\_\+thread for input processing


\begin{DoxyParams}{Parameters}
{\em p} & the received packet \\
\hline
{\em inp} & the network interface on which the packet was received \\
\hline
{\em input\+\_\+fn} & input function to call \\
\hline
\end{DoxyParams}


Definition at line 169 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_ae510f195171bed8499ae94e264a92717}\label{tcpip_8c_ae510f195171bed8499ae94e264a92717}} 
\index{tcpip.c@{tcpip.c}!tcpip\_input@{tcpip\_input}}
\index{tcpip\_input@{tcpip\_input}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_input()}{tcpip\_input()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} tcpip\+\_\+input (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structpbuf}{pbuf}} $\ast$}]{p,  }\item[{struct \mbox{\hyperlink{structnetif}{netif}} $\ast$}]{inp }\end{DoxyParamCaption})}

Pass a received packet to tcpip\+\_\+thread for input processing with ethernet\+\_\+input or ip\+\_\+input. Don\textquotesingle{}t call directly, pass to \mbox{\hyperlink{group__netif_ga66970b5877dd6b0cae906bfa78d0cb4c}{netif\+\_\+add()}} and call netif-\/$>$input().


\begin{DoxyParams}{Parameters}
{\em p} & the received packet, p-\/$>$payload pointing to the Ethernet header or to an IP header (if inp doesn\textquotesingle{}t have N\+E\+T\+I\+F\+\_\+\+F\+L\+A\+G\+\_\+\+E\+T\+H\+A\+RP or N\+E\+T\+I\+F\+\_\+\+F\+L\+A\+G\+\_\+\+E\+T\+H\+E\+R\+N\+ET flags) \\
\hline
{\em inp} & the network interface on which the packet was received \\
\hline
\end{DoxyParams}


Definition at line 212 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_a12bdf37eddcd72c4178e3ea7d370395d}\label{tcpip_8c_a12bdf37eddcd72c4178e3ea7d370395d}} 
\index{tcpip.c@{tcpip.c}!tcpip\_send\_msg\_wait\_sem@{tcpip\_send\_msg\_wait\_sem}}
\index{tcpip\_send\_msg\_wait\_sem@{tcpip\_send\_msg\_wait\_sem}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_send\_msg\_wait\_sem()}{tcpip\_send\_msg\_wait\_sem()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} tcpip\+\_\+send\+\_\+msg\+\_\+wait\+\_\+sem (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{tcpip_8h_a35203296bb838f3b493839ffc6e7285d}{tcpip\+\_\+callback\+\_\+fn}}}]{fn,  }\item[{void $\ast$}]{apimsg,  }\item[{sys\+\_\+sem\+\_\+t $\ast$}]{sem }\end{DoxyParamCaption})}

Sends a message to T\+C\+P\+IP thread to call a function. Caller thread blocks on on a provided semaphore, which ist N\+OT automatically signalled by T\+C\+P\+IP thread, this has to be done by the user. It is recommended to use L\+W\+I\+P\+\_\+\+T\+C\+P\+I\+P\+\_\+\+C\+O\+R\+E\+\_\+\+L\+O\+C\+K\+I\+NG since this is the way with least runtime overhead.


\begin{DoxyParams}{Parameters}
{\em fn} & function to be called from T\+C\+P\+IP thread \\
\hline
{\em apimsg} & argument to A\+PI function \\
\hline
{\em sem} & semaphore to wait on \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+\_\+\+OK if the function was called, another err\+\_\+t if not 
\end{DoxyReturn}


Definition at line 329 of file tcpip.\+c.

\mbox{\Hypertarget{tcpip_8c_acfc81ad493f68714a22b3b8ea7d04378}\label{tcpip_8c_acfc81ad493f68714a22b3b8ea7d04378}} 
\index{tcpip.c@{tcpip.c}!tcpip\_trycallback@{tcpip\_trycallback}}
\index{tcpip\_trycallback@{tcpip\_trycallback}!tcpip.c@{tcpip.c}}
\doxysubsubsection{\texorpdfstring{tcpip\_trycallback()}{tcpip\_trycallback()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__infrastructure__errors_gaf02d9da80fd66b4f986d2c53d7231ddb}{err\+\_\+t}} tcpip\+\_\+trycallback (\begin{DoxyParamCaption}\item[{struct tcpip\+\_\+callback\+\_\+msg $\ast$}]{msg }\end{DoxyParamCaption})}

Try to post a callback-\/message to the tcpip\+\_\+thread mbox This is intended to be used to send \char`\"{}static\char`\"{} messages from interrupt context.


\begin{DoxyParams}{Parameters}
{\em msg} & pointer to the message to post \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{group__sys__mbox_gaa36345e48a49d67cbb0878cd4cbd2195}{sys\+\_\+mbox\+\_\+trypost()}} return code 
\end{DoxyReturn}


Definition at line 446 of file tcpip.\+c.

