\hypertarget{http__server_8c}{}\doxysection{/root/\+Documents/\+A\+S\+L\+S/\+Firmware\+\_\+\+V2.4/cueos/apps/webapp/utils/http/src/http\+\_\+server.c File Reference}
\label{http__server_8c}\index{/root/Documents/ASLS/Firmware\_V2.4/cueos/apps/webapp/utils/http/src/http\_server.c@{/root/Documents/ASLS/Firmware\_V2.4/cueos/apps/webapp/utils/http/src/http\_server.c}}
{\ttfamily \#include \char`\"{}http\+\_\+server.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}altcp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}cmsis\+\_\+os.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}htmlfs.\+h\char`\"{}}\newline
Include dependency graph for http\+\_\+server.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{http__server_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{http__server_8c_a5423dd931bcb3c70a8979bdf2eeb534d}{\+\_\+http\+\_\+close}} (struct altcp\+\_\+pcb $\ast$pcb, \mbox{\hyperlink{group___h_t_t_p__request_ga6118483860ac5c969c5eb4d6a577b5d2}{http\+\_\+request\+\_\+s}} $\ast$req)
\begin{DoxyCompactList}\small\item\em Closes T\+CP connection. finalises write operation and sends F\+IN A\+CK to distant connection. \end{DoxyCompactList}\item 
static err\+\_\+t \mbox{\hyperlink{http__server_8c_a2b0aefc42bc83d38ef55aed4dc7e3a00}{\+\_\+http\+\_\+send}} (struct altcp\+\_\+pcb $\ast$pcb, \mbox{\hyperlink{group___h_t_t_p__request_ga6118483860ac5c969c5eb4d6a577b5d2}{http\+\_\+request\+\_\+s}} $\ast$req)
\begin{DoxyCompactList}\small\item\em Handles response data writing over tcp. \end{DoxyCompactList}\item 
static err\+\_\+t \mbox{\hyperlink{http__server_8c_a111a4e557240b76db52b90d5ce9f67ff}{\+\_\+http\+\_\+receive}} (void $\ast$arg, struct altcp\+\_\+pcb $\ast$pcb, struct pbuf $\ast$p, err\+\_\+t err)
\begin{DoxyCompactList}\small\item\em Function called at data reception. \end{DoxyCompactList}\item 
static err\+\_\+t \mbox{\hyperlink{http__server_8c_a219058a76fb9e62f170b3fb476d6f2dc}{\+\_\+http\+\_\+sent}} (void $\ast$arg, struct altcp\+\_\+pcb $\ast$pcb, uint16\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Function called following write operation. \end{DoxyCompactList}\item 
static err\+\_\+t \mbox{\hyperlink{http__server_8c_a0d84e2bdc5edd480498a2cc907d9b44d}{\+\_\+http\+\_\+poll}} (void $\ast$arg, struct altcp\+\_\+pcb $\ast$pcb)
\begin{DoxyCompactList}\small\item\em Manages application state at pre-\/defined intervals. retries sending left response data and handles connection closing once a maximum retry increment value has been reached. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{http__server_8c_af4d2345fc0770c653b62e0b8901999ba}{\+\_\+http\+\_\+error}} (void $\ast$arg, err\+\_\+t err)
\begin{DoxyCompactList}\small\item\em Frees ressources on T\+C\+P/\+IP stack error. \end{DoxyCompactList}\item 
static err\+\_\+t \mbox{\hyperlink{http__server_8c_af55e13a364acddd6977f3c6ca14385a1}{\+\_\+http\+\_\+accept}} (void $\ast$arg, struct altcp\+\_\+pcb $\ast$pcb, err\+\_\+t err)
\begin{DoxyCompactList}\small\item\em Function called during new connection attempt to the server. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{http__server_8c_af705643162f181a8a57b5a8bd5fdfdf7}{\+\_\+http\+\_\+prepare\+\_\+pcb}} (\mbox{\hyperlink{structhttp__server__s}{http\+\_\+server\+\_\+s}} $\ast$server)
\begin{DoxyCompactList}\small\item\em Prepares a server\textquotesingle{}s tcp procol control block. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structhttp__server__s}{http\+\_\+server\+\_\+s}} $\ast$ \mbox{\hyperlink{group___h_t_t_p__server_gad387e3a8770141b5574464a143164b16}{http\+\_\+server\+\_\+init}} (uint16\+\_\+t port, \mbox{\hyperlink{group___h_t_t_p__request_gaccaa3c880a142429a8c3df768852deb3}{router\+\_\+fn}} router)
\begin{DoxyCompactList}\small\item\em Initialises a new H\+T\+TP server instance. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{http__server_8c_af55e13a364acddd6977f3c6ca14385a1}\label{http__server_8c_af55e13a364acddd6977f3c6ca14385a1}} 
\index{http\_server.c@{http\_server.c}!\_http\_accept@{\_http\_accept}}
\index{\_http\_accept@{\_http\_accept}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_accept()}{\_http\_accept()}}
{\footnotesize\ttfamily static err\+\_\+t \+\_\+http\+\_\+accept (\begin{DoxyParamCaption}\item[{void $\ast$}]{arg,  }\item[{struct altcp\+\_\+pcb $\ast$}]{pcb,  }\item[{err\+\_\+t}]{err }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function called during new connection attempt to the server. 


\begin{DoxyParams}{Parameters}
{\em arg} & http server instance \\
\hline
{\em $\ast$pcb} & tcp procol control block \\
\hline
{\em err} & error forwarded by T\+C\+P/\+IP stack \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
err\+\_\+t error code to be forwarded to the stack 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
err.\+h for further information regarding the T\+C\+I\+P/\+IP stack error codes 
\end{DoxySeeAlso}


Definition at line 194 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_a5423dd931bcb3c70a8979bdf2eeb534d}\label{http__server_8c_a5423dd931bcb3c70a8979bdf2eeb534d}} 
\index{http\_server.c@{http\_server.c}!\_http\_close@{\_http\_close}}
\index{\_http\_close@{\_http\_close}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_close()}{\_http\_close()}}
{\footnotesize\ttfamily static void \+\_\+http\+\_\+close (\begin{DoxyParamCaption}\item[{struct altcp\+\_\+pcb $\ast$}]{pcb,  }\item[{\mbox{\hyperlink{group___h_t_t_p__request_ga6118483860ac5c969c5eb4d6a577b5d2}{http\+\_\+request\+\_\+s}} $\ast$}]{req }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Closes T\+CP connection. finalises write operation and sends F\+IN A\+CK to distant connection. 


\begin{DoxyParams}{Parameters}
{\em $\ast$pcb} & tcp procol control block \\
\hline
{\em req} & http request instance \\
\hline
\end{DoxyParams}


Definition at line 25 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_af4d2345fc0770c653b62e0b8901999ba}\label{http__server_8c_af4d2345fc0770c653b62e0b8901999ba}} 
\index{http\_server.c@{http\_server.c}!\_http\_error@{\_http\_error}}
\index{\_http\_error@{\_http\_error}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_error()}{\_http\_error()}}
{\footnotesize\ttfamily static void \+\_\+http\+\_\+error (\begin{DoxyParamCaption}\item[{void $\ast$}]{arg,  }\item[{err\+\_\+t}]{err }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Frees ressources on T\+C\+P/\+IP stack error. 


\begin{DoxyParams}{Parameters}
{\em arg} & http request instance \\
\hline
{\em err} & error forwarded by T\+C\+P/\+IP stack \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
err.\+h for further information regarding the T\+C\+I\+P/\+IP stack error codes 
\end{DoxySeeAlso}


Definition at line 178 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_a0d84e2bdc5edd480498a2cc907d9b44d}\label{http__server_8c_a0d84e2bdc5edd480498a2cc907d9b44d}} 
\index{http\_server.c@{http\_server.c}!\_http\_poll@{\_http\_poll}}
\index{\_http\_poll@{\_http\_poll}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_poll()}{\_http\_poll()}}
{\footnotesize\ttfamily static err\+\_\+t \+\_\+http\+\_\+poll (\begin{DoxyParamCaption}\item[{void $\ast$}]{arg,  }\item[{struct altcp\+\_\+pcb $\ast$}]{pcb }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Manages application state at pre-\/defined intervals. retries sending left response data and handles connection closing once a maximum retry increment value has been reached. 


\begin{DoxyParams}{Parameters}
{\em arg} & http request instance \\
\hline
{\em $\ast$pcb} & tcp procol control block \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
err\+\_\+t error code to be forwarded to the stack 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
err.\+h for further information regarding the T\+C\+I\+P/\+IP stack error codes 
\end{DoxySeeAlso}


Definition at line 147 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_af705643162f181a8a57b5a8bd5fdfdf7}\label{http__server_8c_af705643162f181a8a57b5a8bd5fdfdf7}} 
\index{http\_server.c@{http\_server.c}!\_http\_prepare\_pcb@{\_http\_prepare\_pcb}}
\index{\_http\_prepare\_pcb@{\_http\_prepare\_pcb}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_prepare\_pcb()}{\_http\_prepare\_pcb()}}
{\footnotesize\ttfamily static void \+\_\+http\+\_\+prepare\+\_\+pcb (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structhttp__server__s}{http\+\_\+server\+\_\+s}} $\ast$}]{server }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Prepares a server\textquotesingle{}s tcp procol control block. 


\begin{DoxyParams}{Parameters}
{\em server} & http server instance \\
\hline
\end{DoxyParams}


Definition at line 225 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_a111a4e557240b76db52b90d5ce9f67ff}\label{http__server_8c_a111a4e557240b76db52b90d5ce9f67ff}} 
\index{http\_server.c@{http\_server.c}!\_http\_receive@{\_http\_receive}}
\index{\_http\_receive@{\_http\_receive}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_receive()}{\_http\_receive()}}
{\footnotesize\ttfamily static err\+\_\+t \+\_\+http\+\_\+receive (\begin{DoxyParamCaption}\item[{void $\ast$}]{arg,  }\item[{struct altcp\+\_\+pcb $\ast$}]{pcb,  }\item[{struct pbuf $\ast$}]{p,  }\item[{err\+\_\+t}]{err }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function called at data reception. 


\begin{DoxyParams}{Parameters}
{\em arg} & http server instance \\
\hline
{\em $\ast$pcb} & tcp procol control block \\
\hline
{\em err} & error forwarded by T\+C\+P/\+IP stack \\
\hline
{\em $\ast$p} & pointer to the received data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
err\+\_\+t error code to be forwarded to the stack 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
err.\+h for further information regarding the T\+C\+I\+P/\+IP stack error codes 
\end{DoxySeeAlso}


Definition at line 98 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_a2b0aefc42bc83d38ef55aed4dc7e3a00}\label{http__server_8c_a2b0aefc42bc83d38ef55aed4dc7e3a00}} 
\index{http\_server.c@{http\_server.c}!\_http\_send@{\_http\_send}}
\index{\_http\_send@{\_http\_send}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_send()}{\_http\_send()}}
{\footnotesize\ttfamily static err\+\_\+t \+\_\+http\+\_\+send (\begin{DoxyParamCaption}\item[{struct altcp\+\_\+pcb $\ast$}]{pcb,  }\item[{\mbox{\hyperlink{group___h_t_t_p__request_ga6118483860ac5c969c5eb4d6a577b5d2}{http\+\_\+request\+\_\+s}} $\ast$}]{req }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Handles response data writing over tcp. 


\begin{DoxyParams}{Parameters}
{\em $\ast$pcb} & tcp procol control block \\
\hline
{\em req} & http request instance \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
err\+\_\+t error code to be forwarded to the stack 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
err.\+h for further information regarding the T\+C\+I\+P/\+IP stack error codes 
\end{DoxySeeAlso}


Definition at line 49 of file http\+\_\+server.\+c.

\mbox{\Hypertarget{http__server_8c_a219058a76fb9e62f170b3fb476d6f2dc}\label{http__server_8c_a219058a76fb9e62f170b3fb476d6f2dc}} 
\index{http\_server.c@{http\_server.c}!\_http\_sent@{\_http\_sent}}
\index{\_http\_sent@{\_http\_sent}!http\_server.c@{http\_server.c}}
\doxysubsubsection{\texorpdfstring{\_http\_sent()}{\_http\_sent()}}
{\footnotesize\ttfamily static err\+\_\+t \+\_\+http\+\_\+sent (\begin{DoxyParamCaption}\item[{void $\ast$}]{arg,  }\item[{struct altcp\+\_\+pcb $\ast$}]{pcb,  }\item[{uint16\+\_\+t}]{len }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function called following write operation. 


\begin{DoxyParams}{Parameters}
{\em arg} & http request instance \\
\hline
{\em $\ast$pcb} & tcp procol control block \\
\hline
{\em len} & length of the data sent during write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
err\+\_\+t error code to be forwarded to the stack 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
err.\+h for further information regarding the T\+C\+I\+P/\+IP stack error codes 
\end{DoxySeeAlso}


Definition at line 130 of file http\+\_\+server.\+c.

